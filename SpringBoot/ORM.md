# ORM이란?
- 자바의 객체와 데이터베이스를 연결하는 프로그래밍 기법
- ORM이 있다면 데이터베이스의 값을 마치 객체처럼 사용할 수 있음
- SQL을 몰라도 자바 언어로만 데이터베이스에 접근해서 원하는 데이터를 받아 올 수 있음
- 즉 객체와 데이터베이스를 연결해 자바 언어로만 데이터베이스를 다룰 수 있게 하는 도구를 ORM

### 장점
- SQL을 직접 작성하지 않고 사용하는 언어로 데이터베이스 접근
- 객체지향적으로 코드를 작성할 수 있기 때문에 비즈니스 로직에만 집중

### 단점
- 프로젝트의 복잡성이 커질수록 사용 난이도가 올라감
- 복잡하고 무거운 쿼리는 ORM으로 해결이 불가능한 경우도 있음

### JPA와 하이버네이트
- ORM에도 여러 종류가 있음
- 자바에는 JPA를 표준으로 사용 -> 자바에서 관계형 데이터베이스를 사용하는 방식을 정의한 인터페이스
- 자바 객체와 데이터베이스를 연결해 데이터를 관리 
- 인터페이스이므로 실제 사용을 위해서는 ORM 프레임워크를 추가로 선택 -> 하이버네이트를 많이 사용함
- 하이버네이트는 JPA를 구현한 구현체이자 자바용 ORM 프레임워크, 내부적으로 JDBC API를 사용

애플리케이션 <-> 스프링 데이터 JPA<br>
          <-----------------> JPA , 하이버네이트, JDBC <-------> 데이터베이스

### 엔티티 매니저
- 앤티티 매니저와 영속성 컨텍스트
- 엔티티 : 데이터베이스의 테이블과 매핑되는 객체를 의미 -> 본질적으로 자바 객체이므로 객체와 다르지 않음 <br>
            데이터베이스의 테이블과 직접 연결된다는 아주 특별한 특징이 있어서 구분지어 부름<br>
            데이터 베이스에 영향을 미치는 쿼리를 실행하는 객체 
- 엔티티 매니저 : 엔티티를 관리해 데이터베이스와 애플리케이션 사이에서 객체를 생성, 수정, 삭제하는 역할<br>
                    엔티티 매니저를 만드는 곳이 엔티티 매너저 팩토리
- 스프링 부트에서도 직접 엔티티 매니저 팩토리를 만들어서 관리할까? 아니다 <br>
  스프링 부트는 내부에서 엔티티 매니저 팩토리를 하나만 생성해서 관리하고<br>
  @PersistenceContext 또는 @Autowired 애너테이션을 사용해서 엔티티 매니저를 사용
  중요!) 엔티티 매니저는 Spring Data JPA에서 관리해서 직접 생성하거나 관리할 필요가 없음

### 영속성 컨텍스트
  - 엔티티 매너저는 엔티티를 영속성 컨텍스트에 저장
  - 영속성 컨텍스트는 JPA의 중요한 특징 중 하나, 엔티티를 관리하는 가상의 공간
  - 이것이 있기 때문에 데이터베이스에서 효과적으로 데이터를 가져올 수 있고, 엔티티를 편하게 사용

### 엔티티의 상태
- 4가지 상태를 가짐 분리, 관리, 비영속, 삭제
- 분리 : 영속성 컨텍스트가 관리하고 있지 않는
- 관리 : 영속성 컨텍스트가 관리
- 비영속 : 영속성 컨텍스트와 전혀 관계가 없는
- 삭제
- 처음에 엔티티를 처음 만들면 엔티티는 비영속 상태가 됨
- persist() 메서드를 사용해 엔티티를 관리 상태로 -> 컨텍스트에서 상태가 관리
- 관리하고 싶지 않다면 detach() 메스드를 통해 분리 상태로
- 객체가 필요없다면 remove
  
           
