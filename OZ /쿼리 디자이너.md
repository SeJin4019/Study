# 쿼리 디자이너(ODI 파일 제작)
1. 사용환경
    -  작업 폴더란 로컬에서 작업중인 보고서 파일을 저장하는 루트 파일 경로를 의미
    -  작업 폴더를 변경할 수도 있음
    -  작업 폴더의 하위 폴더를 '카테고리'라고 함

2. 오즈 데이터 트리
    - 데이터창의 오즈 데이터 트리는 오즈 쿼리 디자이너에서 지원하는 다양한 데이터 스토어들과
    사용자 지정 파라미터등을 트리 형태로 나타냄
    - 널 데이터 무시 : 데이터 필드 값이 널 데이터일 때 처리하는 방법을 설정
    - True : 문자형일 경우 "", 숫자형인 경우 0
    - false : 널 데이터 그대로 취급

3. 데이터 소스
   - 데이터베이스를 비롯한 여러 가지 형태의 데이터 소스들을 데이터스토어라고 함(연결한 DB라고 봐도 무방)
   - 데이터 셋(DB 테이블에서 원하는 데이터를 뽑아낸) : 데이터 스토어로부터 필요한 데이터 필드를 선택하여 정의한 데이터 필드의 집합
                 전체 데이터에 대한 정의와 각 필드들에 대한 정보를 포함
   - ODI : 쿼리 디자이너에서 작업한 내용, 데이터 소스에 대한 연결 정보, 작성한 쿼리에 대한 정보를 저장하는 XML 형태의 파일
   - 데이터 스토어 - 데이터 셋 - 필드 계층 구조
  

4. 작업 순서
   1. 데이터 베이스 연결
   - 데이터베이스 스토어를 추가 (데이터 셋을 가져올 DB) JDBC/ODBC, 사용자 정의 연결 정보 두가지로 연결할 수 있음
   - 추가하면 DB안에 있는 테이블 목록을 볼 수 있음
   - ODI에서 앨리어스 사용 여부와 상관없이 오즈 서버에서는 연결되는 DB 연결 정보가 모두 db.properties 파일에 설정되어 있어야 합니다.
   - 동적 데이터베이스 연결 장점 : 향후 DB 연결 정보가 변경될 경우 일일이 ODI 파일을 편집하지 않아도 됨 (연결 정보 수정해야 할 경우 db.properties 파일만 수정)
   - 데이터베이스에 연결 되면 '테이블 정보' 창에 테이블 목록이 표시되고 필터, 새로고침 기능 사용 가능

   2. 데이터베이스 스토어의 데이터 셋은 쿼리를 통해 가져온 필드 정보와 데이터가 포함된 결과 셋
      - 스토어 팝업 메뉴에서 '데이터 셋 추가' -> 셋 이름 입력 -> 쿼리문 작성 -> 쿼리 실행 -> 필드 생성
      - 드래그해서 추가도 가능 쿼리문 없이도
     

5. 마스터 셋 정의
   - 두 개의 데이터 셋을 '마스터 셋' - '디테일 셋' 관계로 설정할 수 있음
   - 디테일 셋은 마스터 셋의 레코드 수 만큼 쿼리문이 수행, 마스터 레코드의 값을 디테일 셋 쿼리문에서 참조 
   ```SQL
   -- SQL_Maker 데이터 셋
   SELECT Car.Maker, Car.EMaker
   FROM Car
   GROUP BY Car.Maker, Car.EMaker
   ORDER BY Car.Maker ASC

    -- SQL_Car 데이터 셋
   SELECT Car.CarID, Car.CarName
   FROM Car
   WHERE Car.Maker = '#SQL_Maker.Maker#'
   ORDER BY Car.CarID ASC

   -- SQL_Orders 데이터 셋 
   SELECT CarOrders.OrderDate,
   CarOrders.Region, CarOrders.Amount
   FROM CarOrders
   WHERE CarOrders.CarID = '#SQL_Car.CarID#'  -- 이 부분이 SQL_Car 데이터셋의 CarId필드를 설정하는 
   ORDER BY CarOrders.OrderDate ASC

   ```
   ‘SQL_Car’ 데이터 셋의 ‘마스터셋’ 속성 값을 ‘SQL_Maker’로 변경합니다
   SQL_Orders’ 데이터 셋의 ‘마스터셋’ 속성 값을 ‘SQL_Car’로 변경합니다
   디테일 셋 쿼리문을 실행하면 마스터 셋 필드 값을 입력하는 ‘패러미터 입력’ 창이 나옵니다. 임의의 값을 입력합니다. 보고서 출력할 때는 마스터 셋의 데이터가 자동 매핑됩니다
   마스터 셋의 레코드 수만큼 디테일 셋이 만들어짐

6. 사용자 지정 패러미터
   - 사용자 로그인 정보, 데이터베이스 연결 정보, SQL 조회 조건 등을 운영 시점(런타임)에 파라미터로 입력받아 처리하려면 '사용자 지정 파라미터'를 이용할 수 있음      
     사용자 지정 파라미터를 이용하여 최종 사용자가 뷰어로 보고서를 출력할 때 조회 조건을 임의로 바꾸어 조회할 수 있음
